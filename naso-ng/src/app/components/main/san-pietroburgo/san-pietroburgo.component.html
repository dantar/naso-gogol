<svg class="fullsvg" viewBox="0 0 100 100" (pan)="onPan($event)">

    <defs>
        <g id="pin-visited">
            <circle cx="0" cy="0" r="60" style="fill:#00ccff;"></circle>
        </g>
        <g id="pin-A">
            <image width="155.90056" height="149.2946" preserveAspectRatio="none"
                xlink:href="./assets/Kazan-icon-02.png" x="-78.055603" y="-74.331604" />
        </g>
        <g id="pin-B">
            <image xlink:href="./assets/Nevskij-icon-02.png" y="-64.16906" x="-71.432701" preserveAspectRatio="none"
                height="140.48317" width="140.48317" />
        </g>
        <g id="pin-C">
            <circle cx="0" cy="0" r="50" style="fill:#fff290;"></circle>
        </g>
        <g id="pin-D">
            <circle cx="0" cy="0" r="50" style="fill:#d40000;"></circle>
        </g>
        <g id="pin-E">
            <circle cx="0" cy="0" r="50" style="fill:#71d400;"></circle>
        </g>
        <g id="pin-F">
            <circle cx="0" cy="0" r="50" style="fill:#fff290;"></circle>
        </g>
        <g id="pin-G">
            <circle cx="0" cy="0" r="50" style="fill:#d40000;"></circle>
        </g>
        <g id="pin-H">
            <circle cx="0" cy="0" r="50" style="fill:#71d400;"></circle>
        </g>
        <g id="pin-I">
            <circle cx="0" cy="0" r="50" style="fill:#fff290;"></circle>
        </g>
        <g id="pin-J">
            <circle cx="0" cy="0" r="50" style="fill:#ffbb00;"></circle>
        </g>
        <g id="name-A">
            <image xlink:href="./assets/Kazan-icon-SCRITTA.png" y="-11.057654" x="-49.86834" preserveAspectRatio="none"
                height="22.474625" width="99.480148" />
        </g>
        <g id="name-B">
            <image xlink:href="./assets/Kazan-icon-SCRITTA.png" y="-11.057654" x="-49.86834" preserveAspectRatio="none"
                height="22.474625" width="99.480148" />
        </g>
        <g id="name-C">
            <image xlink:href="./assets/Kazan-icon-SCRITTA.png" y="-11.057654" x="-49.86834" preserveAspectRatio="none"
                height="22.474625" width="99.480148" />
        </g>
        <g id="name-D">
            <image xlink:href="./assets/Kazan-icon-SCRITTA.png" y="-11.057654" x="-49.86834" preserveAspectRatio="none"
                height="22.474625" width="99.480148" />
        </g>
        <g id="name-E">
            <image xlink:href="./assets/Kazan-icon-SCRITTA.png" y="-11.057654" x="-49.86834" preserveAspectRatio="none"
                height="22.474625" width="99.480148" />
        </g>
        <g id="name-F">
            <image xlink:href="./assets/Kazan-icon-SCRITTA.png" y="-11.057654" x="-49.86834" preserveAspectRatio="none"
                height="22.474625" width="99.480148" />
        </g>
        <g id="name-G">
            <image xlink:href="./assets/Kazan-icon-SCRITTA.png" y="-11.057654" x="-49.86834" preserveAspectRatio="none"
                height="22.474625" width="99.480148" />
        </g>
        <g id="name-H">
            <image xlink:href="./assets/Kazan-icon-SCRITTA.png" y="-11.057654" x="-49.86834" preserveAspectRatio="none"
                height="22.474625" width="99.480148" />
        </g>
        <g id="name-I">
            <image xlink:href="./assets/Kazan-icon-SCRITTA.png" y="-11.057654" x="-49.86834" preserveAspectRatio="none"
                height="22.474625" width="99.480148" />
        </g>
        <g id="name-J">
            <image xlink:href="./assets/Kazan-icon-SCRITTA.png" y="-11.057654" x="-49.86834" preserveAspectRatio="none"
                height="22.474625" width="99.480148" />
        </g>
    </defs>

    <g style="display:inline" id="layer1">
        <rect x="-100" y="-100" width="300" height="300" style="opacity: 0;"></rect>
        <image width="139.72601" height="100" preserveAspectRatio="none" xlink:href="assets/pietroburgo.jpg"
            id="image110" x="-19.863007" y="1.2694414e-08" />
    </g>

    <g style="display:inline" id="layer2">
        <path id="segment" *ngIf="(visits.length > 0) && panEvent" [attr.d]="visitsPathD()"
            style="fill:none;stroke:#00ccff;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
        <g *ngIf="showNaso()" id="naso-mappa" [@nasopopup]="animationStateNasopopup()"
            (@nasopopup.done)="animationDoneNasopopup($event)">
            <path
                style="fill:#ffd5d5;stroke:#ff8080;stroke-width:3.49195528px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
                d="M -46.382312,38.828708 C -69.877967,36.800616 -63.998667,25.73409 -57.606469,14.509735 v 0 l 53.9604047,-56.919307 v 0 c 4.34566839,-3.760658 6.7504382,-9.462211 21.2011613,-3.117817 v 0 l -2.708245,86.062503 v 0 C 5.6040656,45.232035 12.092293,38.919792 -0.64059783,33.146366 -18.917875,23.97647 -39.322347,37.112766 -46.382312,38.828708 Z"
                id="path843-3" />
            <path
                style="fill:#ffd5d5;stroke:#ff8080;stroke-width:3.92886448px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
                d="m -34.744045,35.440545 c -4.768474,3.007798 3.733424,-0.722859 9.333333,6.965262 18.1105716,6.788434 29.4607877,2.896046 40.257564,-1.870693 L -2.7782331,23.97647 C -11.522857,16.705256 -25.999456,29.8923 -34.744045,35.440545 Z"
                id="path851-8" />
        </g>
        <use *ngFor="let location of visits" href="#pin-visited" [attr.transform]="visitedStyle(location)"></use>

        <g *ngFor="let location of locations">
            <use [attr.href]="'#name-'+location.name" [@names]="locationStateName(location)"></use>
            <use [attr.href]="'#pin-'+location.name" [@location]="locationStatePin(location)"></use>
        </g>
        <g (click)="clickedScreen($event)">
            <rect x="-100" y="-100" width="300" height="300" style="opacity: 0;"></rect>
        </g>
        <circle *ngFor="let location of locations" cx="0" cy="0" r="50" style="opacity: 0;"
            [@location]="locationStatePin(location)" (@location.done)="animationLocationDone($event, location)"
            (click)="clickLocation(location)" (touchstart)="onTouchStart($event, location)"
            (mousedown)="onTouchStart($event, location)"></circle>

    </g>

    <g *ngIf="tutorial1">
        <g id="tutorial">
            <text id="text971" y="93.136604" x="50.0625"
                style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:10.66666698px;line-height:1.25;font-family:Garamond;-inkscape-font-specification:'Garamond, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;display:inline;fill:#483e37;fill-opacity:1;stroke:#483e37;stroke-width:2;stroke-miterlimit:4;stroke-dasharray:none;opacity:0.75;"
                xml:space="preserve">
                <tspan y="93.136604" x="50.0625" id="tspan969">{{tutorial1.text}}</tspan>
            </text>
            <text xml:space="preserve"
                style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:10.66666698px;line-height:1.25;font-family:Garamond;-inkscape-font-specification:'Garamond, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;display:inline;fill:#ffffff;fill-opacity:1;stroke:none;"
                x="50.0625" y="93.136604" id="text847-3">
                <tspan id="tspan845-6" x="50.0625" y="93.136604">{{tutorial1.text}}</tspan>
            </text>
        </g>
        <g [attr.transform]="tutorial1.transform">
            <g id="touchfinger" [@pulsating]="tutorial1.pulse" (@pulsating.done)="togglePulse(tutorial1)">
                <path
                    style="opacity:0.75;vector-effect:none;fill:#483e37;fill-opacity:1;stroke:none;stroke-width:0.20145686;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke"
                    d="m 0.3717935,-1.8265427 c 0.870507,0.01662 1.791673,0.615866 2.187695,1.47275998 l 0.180209,0.390323 0.01968,2.00237102 0.01928,2.002372 0.204213,-0.05233 c 0.112427,-0.02876 0.438568,-0.05043 0.724772,-0.0484 0.454293,0.0032 0.574414,0.02998 0.945116,0.212472 0.233543,0.114974 0.566694,0.351464 0.740511,0.525283 l 0.31635,0.315957 0.401341,-0.135746 c 0.31726,-0.10734 0.509009,-0.130308 0.915605,-0.109385 0.935638,0.04815 1.705248,0.550733 2.0846065,1.361407 l 0.188866,0.403702 0.236476,-0.06689 c 0.130113,-0.03679 0.43808,-0.06749 0.684244,-0.06807 1.011275,-0.0024 1.905345,0.627624 2.269932,1.599458 0.13529,0.360632 0.138078,0.427792 0.109777,2.7354057 -0.03431,2.79789 -0.08849,3.204948 -0.836124,6.298282 -0.539854,2.233645 -0.672131,3.062459 -0.763332,4.780272 -0.02441,0.459714 -0.156156,0.688316 -0.496954,0.862094 -0.203318,0.103673 -0.586225,0.111822 -5.2705365,0.110565 -4.470835,-0.0012 -5.074801,-0.01297 -5.25597704,-0.102302 -0.306203,-0.150988 -0.40497096,-0.355739 -0.46901796,-0.971479 -0.06468,-0.621832 -0.26389,-1.191421 -0.578008,-1.652576 -0.115906,-0.17016 -0.589533,-0.783916 -1.052533,-1.364162 -0.462997,-0.580246 -1.000844,-1.285468 -1.195363,-1.566799 -0.53548,-0.774462 -1.445422,-2.39229 -2.249864,-4.000808 -1.143632,-2.286745 -1.485672,-3.2850947 -1.426331,-4.1605557 0.06509,-0.960281 0.640768,-1.558203 1.669496,-1.734418 0.826736,-0.141614 1.725572,0.291954 2.682287,1.293337 0.270311,0.282931 0.505707,0.514267 0.522923,0.514267 0.01721,0 0.03148,-1.98073 0.03148,-4.401754 0,-4.12566302 0.0073,-4.42457102 0.11922,-4.76374702 0.291796,-0.88449298 0.990366,-1.46950898 1.971681,-1.65139498 0.120614,-0.02236 0.24393,-0.03189 0.368289,-0.02951 z"
                    id="path993" />
                <path
                    style="opacity:1;vector-effect:none;fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.20145686;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke"
                    d="m 0.3839895,-0.39509672 c -0.353422,0.0053 -0.52498604,0.09451 -0.68424404,0.355698 -0.12074096,0.19802 -0.12453296,0.382758 -0.12827196,6.59771202 -0.0029,4.7787747 -0.02323,6.4498147 -0.08027,6.6154177 -0.207871,0.603537 -1.13108,0.686654 -1.420033,0.127878 -0.05455,-0.10549 -0.12267,-0.447096 -0.151488,-0.759398 -0.04671,-0.506177 -0.08556,-0.629399 -0.358057,-1.133982 -0.753951,-1.396094 -1.982054,-2.7078637 -2.535131,-2.7078637 -0.232945,0 -0.374976,0.211733 -0.374976,0.559909 0,0.467587 0.597664,1.8550067 1.636837,3.7997437 1.198014,2.241996 1.745698,3.104931 2.832592,4.463529 0.436122,0.545146 0.950419,1.231415 1.143032,1.525091 0.35983,0.548633 0.738763,1.391536 0.816058,1.815866 l 0.04368,0.240017 h 4.17118 4.1711805 l 0.04092,-0.559515 c 0.06349,-0.869177 0.316231,-2.250434 0.768842,-4.204232 0.513272,-2.215662 0.530068,-2.302961 0.648045,-3.324431 0.06445,-0.558042 0.09617,-1.450122 0.09601,-2.717307 -2.01e-4,-1.7794757 -0.0077,-1.8987457 -0.129452,-2.0983777 -0.133431,-0.218852 -0.456116,-0.395437 -0.722019,-0.395437 -0.221178,0 -0.569626,0.25558 -0.698804,0.512691 -0.0857,0.170584 -0.112062,0.383228 -0.112139,0.910884 -1.27e-4,0.687675 -1.13e-4,0.688381 -0.207752,0.9132447 C 8.8983715,10.41428 8.5927975,10.48281 8.2565525,10.342318 7.8122205,10.156663 7.7950205,10.084494 7.7592055,8.2667603 l -0.03227,-1.62267 -0.238835,-0.21877 c -0.203647,-0.186509 -0.284816,-0.218771 -0.55086,-0.218771 -0.330488,0 -0.575292,0.135819 -0.729101,0.404488 -0.05197,0.09078 -0.09046,0.554205 -0.111351,1.337012 l -0.03227,1.197725 -0.208933,0.208933 c -0.184996,0.184843 -0.249283,0.208539 -0.558334,0.208539 -0.309061,0 -0.372941,-0.02407 -0.557941,-0.208933 l -0.209328,-0.208539 -0.03187,-1.613622 c -0.02308,-1.164647 -0.05544,-1.654068 -0.116073,-1.760387 -0.128359,-0.225049 -0.457658,-0.395955 -0.76412,-0.396225 -0.221442,-1.91e-4 -0.317559,0.04076 -0.511511,0.218377 l -0.238837,0.218768 -0.03187,1.204021 c -0.02092,0.787733 -0.05932,1.252028 -0.111353,1.342914 -0.217962,0.380735 -0.703212,0.515805 -1.105652,0.307695 -0.391376,-0.20239 -0.381557,-0.08855 -0.381666,-4.423789 -6.4e-5,-3.63556602 -0.0089,-3.96867702 -0.111746,-4.17039302 -0.163728,-0.321092 -0.404667,-0.473319 -0.741299,-0.46823 z"
                    id="rect986" />
            </g>
        </g>
    </g>


</svg>

<app-finale-premio [@fadeinout] *ngIf="unlocked" (triggerVideo)="video = $event"></app-finale-premio>

<app-panino [@dissolve]="breadDissolve" *ngIf="intro" (@dissolve.done)="doneDissolve($event)"
    (skipped)="introSkipped()"></app-panino>

<app-listen-track *ngIf="track" [track]="track" [@mediaitem]></app-listen-track>
<app-watch-video *ngIf="video" [video]="video" (click)="clickCloseVideo()" [@mediaitem]></app-watch-video>

<div class="panel-menu-list top-right-menu" *ngIf="video">
    <div class="panel-menu-item" (click)="clickCloseVideo()">
        close
    </div>
</div>